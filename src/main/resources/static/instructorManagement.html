<!DOCTYPE html>
<div lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instructor Management</title>
	<link rel="stylesheet" href="style.css">
</head>
<body>
	<div class="container">
    <h1>Instructor Management</h1>

    <!-- Form to create a new instructor -->
    <h2>Create Instructor</h2>
    <form id="createInstructorForm">
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" required><br><br>

        <label for="contact">Contact:</label>
        <input type="text" id="contact" name="contact"><br><br>

        <button type="button" onclick="createInstructor()">Create Instructor</button>
    </form>

    <p id="createResult"></p>

    <!-- Button to retrieve all instructors -->
    <h2>All Instructors</h2>
    <button type="button" onclick="getAllInstructors()">Load Instructors</button>
    <table id="instructorsTable">
        <thead>
            <tr>
                <th>Instructor ID</th>
                <th>Name</th>
                <th>Contact</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <!-- Form to update an instructor -->
    <h2>Update Instructor</h2>
    <form id="updateInstructorForm">
        <label for="updateInstructorId">Instructor ID:</label>
        <input type="number" id="updateInstructorId" name="updateInstructorId" required><br><br>

        <label for="updateName">Name:</label>
        <input type="text" id="updateName" name="updateName"><br><br>

        <label for="updateContact">Contact:</label>
        <input type="text" id="updateContact" name="updateContact"><br><br>

        <button type="button" onclick="updateInstructor()">Update Instructor</button>
    </form>

    <p id="updateResult"></p>

    <script>
        // Create a new instructor
        function createInstructor() {
            const name = document.getElementById('name').value;
            const contact = document.getElementById('contact').value;

            fetch('/instructors', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ name, contact })
            })
            .then(response => response.json())
            .then(data => {
                document.getElementById('createResult').innerText = `Instructor created with ID: ${data.insId}`;
                getAllInstructors();
            })
            .catch(error => console.error('Error:', error));
        }

        // Retrieve and display all instructors
        function getAllInstructors() {
            fetch('/instructors')
            .then(response => response.json())
            .then(data => {
                const tbody = document.getElementById('instructorsTable').querySelector('tbody');
                tbody.innerHTML = '';
                data.forEach(instructor => {
                    const row = `<tr>
                        <td>${instructor.insId}</td>
                        <td>${instructor.name}</td>
                        <td>${instructor.contact}</td>
                        <td>
                            <button onclick="deleteInstructor(${instructor.insId})">Delete</button>
                        </td>
                    </tr>`;
                    tbody.innerHTML += row;
                });
            })
            .catch(error => console.error('Error:', error));
        }

        // Update an instructor
        function updateInstructor() {
            const instructorId = document.getElementById('updateInstructorId').value;
            const name = document.getElementById('updateName').value;
            const contact = document.getElementById('updateContact').value;

            fetch(`/instructors/${instructorId}`, {
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ name, contact })
            })
            .then(response => response.json())
            .then(data => {
                document.getElementById('updateResult').innerText = `Instructor updated successfully!`;
                getAllInstructors();
            })
            .catch(error => console.error('Error:', error));
        }

        // Delete an instructor
        function deleteInstructor(instructorId) {
            fetch(`/instructors/${instructorId}`, {
                method: 'DELETE'
            })
            .then(() => {
                alert(`Instructor with ID ${instructorId} deleted`);
                getAllInstructors();
            })
            .catch(error => console.error('Error:', error));
        }
    </script>
</body>
</div>
</html>
